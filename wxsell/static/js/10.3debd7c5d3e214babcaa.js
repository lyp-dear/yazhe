webpackJsonp([10],{Ij6r:function(t,s){},NS8l:function(t,s,e){"use strict";s.a=function(t){var s=o.b+"/user/address/insert";return a.a.post(s,t).then(function(t){return Promise.resolve(t)}).catch(function(t){})},s.b=function(t){var s=o.b+"/user/address/list",e={openId:t};return a.a.post(s,e).then(function(t){return Promise.resolve(t)}).catch(function(t){})},s.d=function(t){var s=o.b+"/user/address/update";return a.a.post(s,t).then(function(t){return Promise.resolve(t)}).catch(function(t){})},s.c=function(t){var s=o.b+"/user/address/update";return a.a.post(s,t).then(function(t){return Promise.resolve(t)}).catch(function(t){})};var n=e("mtWM"),a=e.n(n),o=e("T452")},vLSn:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("OgVB");var n=e("/Lyv"),a=e.n(n),o=e("fxnj"),i=e.n(o),r=e("C0u4"),d=e("T452"),c=e("NS8l"),u=e("CaOM"),v=e("DFzv"),f={data:function(){return{remark:"",goods:{},addressId:"",userInfo:"",addressList:[]}},methods:{wxconfigInit:function(){var t=this;if(""!==this.addressId){var s={openid:this.userInfo.openId,remark:this.remark,addressId:this.addressId,total_fee:this.goods.count.toFixed(2),goodsList:this.goods.goodsList},e=this;Object(r.a)(s).then(function(t){var s=t.data,n=t.data;n=JSON.stringify(n),localStorage.setItem("wxconfig",n),i.a.config({debug:!1,appId:s.appid,timestamp:s.timeStamp,nonceStr:s.nonce_str,signature:s.paySign,jsApiList:["chooseWXPay"]}),i.a.ready(function(){e.addCart(s)}),i.a.error(function(t){console.log(t)})})}else a.a.confirm("请添加默认地址").then(function(s){t.$router.push({path:"/my-address"})}).catch(function(t){})},getAddressList:function(){var t=this;Object(c.b)(this.userInfo.openId).then(function(s){if(s.data.code===d.a){t.addressList=s.data.data;for(var e=0;e<s.data.data.length;e++)1===s.data.data[e].type&&(t.addressId=s.data.data[e].id)}}).catch(function(t){})},addCart:function(t){Object(v.a)(),i.a.chooseWXPay({timestamp:t.timeStamp,nonceStr:t.nonce_str,package:t.package,signType:"MD5",paySign:t.paySign,success:function(t){console.log(t),Object(v.a)(!0),Object(v.b)("支付成功")},cancel:function(t){Object(v.a)(!0),Object(v.b)("取消支付")},fail:function(t){Object(v.a)(!0),Object(v.b)("支付失败")}})},goAddress:function(){this.$router.push({path:"/my-address"})}},created:function(){this.goods=this.$route.params},mounted:function(){this.userInfo=Object(u.b)(),this.getAddressList()},watch:{$route:function(t){console.log(t),"/placeOrder"===t.path&&this.getAddressList()}}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"slide"}},[e("div",{attrs:{id:"placeOrder"}},[t._l(t.addressList,function(s,n){return 1===s.type?e("div",{staticClass:"address",on:{click:t.goAddress}},[e("div",{staticClass:"name-phone"},[e("div",[e("span",[t._v("收件人:"+t._s(s.name))]),t._v(" "),e("span",[t._v("默认")])]),t._v(" "),e("div",[t._v(t._s(s.phone))])]),t._v(" "),e("div",{staticClass:"address-text"},[t._v("\n\t\t\t\t地址: "+t._s(s.province)+t._s(s.city)+t._s(s.area)+t._s(s.address)+"\n\t\t\t")])]):t._e()}),t._v(" "),t._l(t.goods.list,function(s,n){return e("div",{staticClass:"commodity-info"},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:s.picture_url,alt:""}})]),t._v(" "),e("div",{staticClass:"name"},[e("p",[t._v(t._s(s.goods_name))])]),t._v(" "),e("div",{staticClass:"money"},[e("p",[t._v("￥"+t._s(s.price))]),t._v(" "),e("p",[t._v("X"+t._s(s.num))])])])}),t._v(" "),e("div",{staticClass:"cost-box"},[e("div",[e("mt-cell",{attrs:{title:"商品合计"}},[e("span",{staticStyle:{color:"#ff9701","font-size":"13px"}},[t._v("￥"+t._s(t.goods.count.toFixed(2)))])])],1),t._v(" "),e("div",[e("mt-field",{attrs:{label:"买家留言:",placeholder:"选填：填写内容已和卖家协商确认"},model:{value:t.remark,callback:function(s){t.remark=s},expression:"remark"}})],1),t._v(" "),e("div",[e("span",[t._v("共"+t._s(t.goods.piece)+"件商品")]),t._v(" "),e("span",[t._v("小计: "),e("b",[t._v("￥"+t._s(t.goods.count.toFixed(2)))])])])]),t._v(" "),e("div",{staticClass:"flex-bottom"},[e("div",[t._v("合计 ："),e("span",[t._v("￥"+t._s(t.goods.count.toFixed(2)))])]),t._v(" "),e("div",{on:{click:t.wxconfigInit}},[t._v("提交订单")])])],2)])},staticRenderFns:[]};var p=e("VU/8")(f,l,!1,function(t){e("Ij6r")},"data-v-8bdfd902",null);s.default=p.exports}});
//# sourceMappingURL=10.3debd7c5d3e214babcaa.js.map